{% extends "layouts/base.html" %}
{% set active_page = "houses" %}
{% import 'macros.html' as macros %}


{#Houses: records the details of the Hogwarts Houses#}
{#- houseID: INT, PK, not NULL, UNIQUE, auto_increment#}
{#- name: VARCHAR, not NULL#}
{#- founder: VARCHAR, not NULL#}
{#- animal: VARCHAR, not NULL#}
{#- colors: VARCHAR, not NULL#}
{#- points: INT, not NULL#}

{% block body %}

    <div class="container w-75 mt-4 mb-4">

        <h3>Add A House</h3>

        <div class="form-group">
            <label for="newHouseName">Name of House</label>
            <br><input type="text" name="houseName" id="newHouseName" class="form-control w-50">

            <br><label for="newHouseFounder">House Founder</label>
            <br><input type="text" name="houseFounder" id="newHouseFounder" class="form-control w-50">

            <br><label for="houseAnimal">House Mascot/Animal</label>
            <br><input type="text" name="houseAnimal" id="houseAnimal" class="form-control w-50">

            <br><label for="houseColor">House Colors</label>
            <br><input type="text" name="houseColor" id="houseColor" class="form-control w-50">

            <br><label for="housePoints">House Points</label>
            <br><input type="number" name="housePoints" id="housePoints" class="form-control w-25" min="0">

            <br><input type="button" value="Add House" name="Add House" id="addHouseSubmit" class="btn btn-primary">

        </div>


        <p></p>
        <h3>View All Houses</h3>

        {{ macros.table(data.table.caption, data.table.headers, data.table.columns, data.table.id_col_name, data.table.rows, "Houses") }}

    </div>

    <script type="text/javascript" src="{{ url_for('static', filename='js/client.js') }}">
    </script>

    <script type="text/javascript">
        function deleteHouse(rowId) {
            deleteRowTemplate("{{ url_for('delete_row') }}", "Houses", rowId)
        }

        $('.delete-button').each((i, obj) => {
            console.log(obj.dataset.rowid)
            obj.addEventListener("click", (e) => {
                deleteHouse(obj.dataset.rowid);
            });
        });
    </script>
{% endblock body %}